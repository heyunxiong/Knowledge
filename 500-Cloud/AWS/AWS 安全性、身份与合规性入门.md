AWS 安全性、身份与合规性入门



## 章节1

本地工作负载面临的挑战

![image-20211223161039157](_assets/AWS%20安全性、身份与合规性入门/image-20211223161039157.png)

亚马逊aws 能帮你解决上面的问题，保证安全



![image-20211223161119184](_assets/AWS%20安全性、身份与合规性入门/image-20211223161119184.png)



![image-20211223161135009](_assets/AWS%20安全性、身份与合规性入门/image-20211223161135009.png)



aws cloud 中的安全

 

![image-20211223170316606](_assets/AWS%20安全性、身份与合规性入门/image-20211223170316606.png)



![image-20211223170322057](_assets/AWS%20安全性、身份与合规性入门/image-20211223170322057.png)





责任共担模型

![image-20211223170343956](_assets/AWS%20安全性、身份与合规性入门/image-20211223170343956.png)



aws 有完善的架构支撑

![image-20211223170948167](_assets/AWS%20安全性、身份与合规性入门/image-20211223170948167.png)



卓越运营：侧重于运行和监控系统以提供业务价值，并不断改进流程和程序

安全性：保护信息和系统

可靠性：预防故障和快速从故障中恢复以满足业务和客户需求的能力

性能效率：高效使用IT和计算资源

成本优化：避免不必要的成本



![image-20211223171149690](_assets/AWS%20安全性、身份与合规性入门/image-20211223171149690.png)

身份和访问管理：确保只有经过授权和身份验证的用户才能访问您的资源。并且这些用户只能以预期的方式进行访问

检测性控制：识别潜在的安全威胁或事件

基础设施保护：确保工作负载内的系统和服务受到保护，防止意外和未经授权的访问以及潜在的漏洞

数据保护：通过加密方法和访问控制来保护静态数据和传输中的数据，并根据敏感程度对数据进行分类

事件响应：制定流程来响应安全事件，减少安全问题带来的影响







## 2 身份访问管理



通过使用身份和访问管理，可以定义谁有权限访问哪些资源，并且可以对这些资源具有哪些操作



身份验证： 通过密码作为验证的凭证

授权：授权是授予用户访问特定资源或功能的权限的过程。（用户可以做什么，不能做什么）



在aws 中进行身份和访问管理

两个重要的方面：

1.保护凭证

2.精细授权

最低权限原则



aws上提供身份访问和权限控制的服务

可以使用 Amazon cognito， 简化和保护web和移动应用程序的用户注册、登录和访问控制

可以使用Amazon directory service，提供包含组织相关信息的目录（比如：用户，组，计算机和其他资源，就是所谓的ad group）

IAM： 通过指定policy，管理用户对aws资源的访问 

Amazon single sign on

即系sso服务，单点登录。借助这个服务，用户可以利用现有的企业凭证登录用户门户/



## IAM

先吹一波IAM的强大

![image-20211223173438832](_assets/AWS%20安全性、身份与合规性入门/image-20211223173438832.png)

![image-20211223173444796](_assets/AWS%20安全性、身份与合规性入门/image-20211223173444796.png)



像前面看的iam视频，

![image-20211223172833846](_assets/AWS%20安全性、身份与合规性入门/image-20211223172833846.png)



通过policy定义允许和拒绝的资源权限



![image-20211223172919161](_assets/AWS%20安全性、身份与合规性入门/image-20211223172919161.png)



建议先创建一个组，定义好这个组的权限，然后加user



![image-20211223173129155](_assets/AWS%20安全性、身份与合规性入门/image-20211223173129155.png)



 关于iam role



![image-20211223173200792](_assets/AWS%20安全性、身份与合规性入门/image-20211223173200792.png)



role是动态凭证。





案例：

![image-20211223173336129](_assets/AWS%20安全性、身份与合规性入门/image-20211223173336129.png)





## aws  cognito

用于移动或web身份验证： cognito

吹一波：

![image-20211223173756846](_assets/AWS%20安全性、身份与合规性入门/image-20211223173756846.png)

![image-20211223173803063](_assets/AWS%20安全性、身份与合规性入门/image-20211223173803063.png)



使用案例：

![image-20211223173808743](_assets/AWS%20安全性、身份与合规性入门/image-20211223173808743.png)

![image-20211223173725588](_assets/AWS%20安全性、身份与合规性入门/image-20211223173725588.png)



使用场景：

https://docs.aws.amazon.com/zh_cn/cognito/latest/developerguide/cognito-scenarios.html



## amazon directory service

![image-20211223174019387](_assets/AWS%20安全性、身份与合规性入门/image-20211223174019387.png)

![image-20211223174028227](_assets/AWS%20安全性、身份与合规性入门/image-20211223174028227.png)

使用案例：

https://docs.aws.amazon.com/zh_cn/directoryservice/latest/admin-guide/ms_ad_use_cases.html



## 3 检测性控制

aws提供的检测性服务

![image-20211223174233317](_assets/AWS%20安全性、身份与合规性入门/image-20211223174233317.png)

![image-20211223174238691](_assets/AWS%20安全性、身份与合规性入门/image-20211223174238691.png)



用于威胁检测的 Amazon Guard Duty

先吹一波：

![image-20211223174325665](_assets/AWS%20安全性、身份与合规性入门/image-20211223174325665.png)

![image-20211223174331933](_assets/AWS%20安全性、身份与合规性入门/image-20211223174331933.png)



![image-20211223174311827](_assets/AWS%20安全性、身份与合规性入门/image-20211223174311827.png)



demo：

![image-20211223174459063](_assets/AWS%20安全性、身份与合规性入门/image-20211223174459063.png)



![image-20211223174833556](_assets/AWS%20安全性、身份与合规性入门/image-20211223174833556.png)



![image-20211223182407111](_assets/AWS%20安全性、身份与合规性入门/image-20211223182407111.png)



guard duty 视频演示：https://study.163.com/course/courseLearn.htm?courseId=1212148816#/learn/video?lessonId=1283479106&courseId=1212148816





用于确定检测结果优化的Amazon Security Hub



吹一波：

![image-20211223185336798](_assets/AWS%20安全性、身份与合规性入门/image-20211223185336798.png)

![image-20211223185402392](_assets/AWS%20安全性、身份与合规性入门/image-20211223185402392.png)



aws  security value chain

![image-20211223184354371](_assets/AWS%20安全性、身份与合规性入门/image-20211223184354371.png)

security hub集合了有安全检查的

![image-20211223184802343](_assets/AWS%20安全性、身份与合规性入门/image-20211223184802343.png)

![image-20211223184737574](_assets/AWS%20安全性、身份与合规性入门/image-20211223184737574.png)

![image-20211223184820307](_assets/AWS%20安全性、身份与合规性入门/image-20211223184820307.png)





工作原理：

![image-20211223184929582](_assets/AWS%20安全性、身份与合规性入门/image-20211223184929582.png)



有很多集成工具

![image-20211223185018609](_assets/AWS%20安全性、身份与合规性入门/image-20211223185018609.png)



![image-20211223185046421](_assets/AWS%20安全性、身份与合规性入门/image-20211223185046421.png)



![image-20211223185055098](_assets/AWS%20安全性、身份与合规性入门/image-20211223185055098.png)

![image-20211223185119217](_assets/AWS%20安全性、身份与合规性入门/image-20211223185119217.png)





案例1：

![image-20211223185150377](_assets/AWS%20安全性、身份与合规性入门/image-20211223185150377.png)

案例2：



![image-20211223185219900](_assets/AWS%20安全性、身份与合规性入门/image-20211223185219900.png)

sh的关键点：

![image-20211223185242372](_assets/AWS%20安全性、身份与合规性入门/image-20211223185242372.png)













用于数据监控的 Amazon Macie

![image-20211223185433044](_assets/AWS%20安全性、身份与合规性入门/image-20211223185433044.png)



案例：

![image-20211223185542973](_assets/AWS%20安全性、身份与合规性入门/image-20211223185542973.png)

![image-20211223185538072](_assets/AWS%20安全性、身份与合规性入门/image-20211223185538072.png)

![image-20211223185530426](_assets/AWS%20安全性、身份与合规性入门/image-20211223185530426.png)



## 4 基础设施保护



用于流量过滤的Amazon WAF

Web Application Firewall

![image-20211223185653482](_assets/AWS%20安全性、身份与合规性入门/image-20211223185653482.png)

![image-20211223185701649](_assets/AWS%20安全性、身份与合规性入门/image-20211223185701649.png)



waf免遭流量攻击 办公室楼钱的保安

![image-20211223190121719](_assets/AWS%20安全性、身份与合规性入门/image-20211223190121719.png)



部署位置：

![image-20211223190142099](_assets/AWS%20安全性、身份与合规性入门/image-20211223190142099.png)



防御条件设置：

![image-20211223190148515](_assets/AWS%20安全性、身份与合规性入门/image-20211223190148515.png)

多条件组合

![image-20211223190259936](_assets/AWS%20安全性、身份与合规性入门/image-20211223190259936.png)

规则执行位置：



![image-20211223190336762](_assets/AWS%20安全性、身份与合规性入门/image-20211223190336762.png)





规则类型

![image-20211223190350659](_assets/AWS%20安全性、身份与合规性入门/image-20211223190350659.png)

regular就是前面介绍的设置条件过滤的规则

rate-based rule：速率规则。控制一次性的流量请求数据

![image-20211223190355673](_assets/AWS%20安全性、身份与合规性入门/image-20211223190355673.png)





案例：



![image-20211223185730326](_assets/AWS%20安全性、身份与合规性入门/image-20211223185730326.png)

![image-20211223185722361](_assets/AWS%20安全性、身份与合规性入门/image-20211223185722361.png)





demo：

1.创建过滤条件

2.创建规则，使用刚创建的过滤条件



![image-20211223190552759](_assets/AWS%20安全性、身份与合规性入门/image-20211223190552759.png)



![image-20211223190601586](_assets/AWS%20安全性、身份与合规性入门/image-20211223190601586.png)



![image-20211223190654128](_assets/AWS%20安全性、身份与合规性入门/image-20211223190654128.png)



使用waf的情况

![image-20211223190850899](_assets/AWS%20安全性、身份与合规性入门/image-20211223190850899.png)





用于DDoS保护的 Amazon Shield

![image-20211223190959715](_assets/AWS%20安全性、身份与合规性入门/image-20211223190959715.png)

![image-20211223193032072](_assets/AWS%20安全性、身份与合规性入门/image-20211223193032072.png)

![image-20211223193040018](_assets/AWS%20安全性、身份与合规性入门/image-20211223193040018.png)

## 5.数据保护

aws对于数据的保护。

1.静态数据的保护

![image-20211224210512185](_assets/AWS%20安全性、身份与合规性入门/image-20211224210512185.png)

2.传输过程中对数据的保护

![image-20211224210525124](_assets/AWS%20安全性、身份与合规性入门/image-20211224210525124.png)



用于对数据保护的aws相关服务

Amazon Key Management Service KMS

轻松地创建和控制用于加密操作的密钥。

![image-20211224210656082](_assets/AWS%20安全性、身份与合规性入门/image-20211224210656082.png)

![image-20211224210702936](_assets/AWS%20安全性、身份与合规性入门/image-20211224210702936.png)





## 用于密钥管理的KMS

![image-20211224210804139](_assets/AWS%20安全性、身份与合规性入门/image-20211224210804139.png)

![image-20211224210753394](_assets/AWS%20安全性、身份与合规性入门/image-20211224210753394.png)





![image-20211224210831678](_assets/AWS%20安全性、身份与合规性入门/image-20211224210831678.png)

![image-20211224210839128](_assets/AWS%20安全性、身份与合规性入门/image-20211224210839128.png)



KMS的优势

![image-20211224210848903](_assets/AWS%20安全性、身份与合规性入门/image-20211224210848903.png)



## 用于保护通信的Amazon Certificate Manager

优势：

![image-20211224210941819](_assets/AWS%20安全性、身份与合规性入门/image-20211224210941819.png)

![image-20211224210948667](_assets/AWS%20安全性、身份与合规性入门/image-20211224210948667.png)



使用案例

![image-20211224211002752](_assets/AWS%20安全性、身份与合规性入门/image-20211224211002752.png)

![image-20211224211010152](_assets/AWS%20安全性、身份与合规性入门/image-20211224211010152.png)



视频演示地址：https://study.163.com/course/courseLearn.htm?courseId=1212148816#/learn/video?lessonId=1283483131&courseId=1212148816

![image-20211224211117572](_assets/AWS%20安全性、身份与合规性入门/image-20211224211117572.png)



![image-20211224211144369](_assets/AWS%20安全性、身份与合规性入门/image-20211224211144369.png)



![image-20211224211259990](_assets/AWS%20安全性、身份与合规性入门/image-20211224211259990.png)



## 用于凭证管理的Amazon Secrets Manager

我的理解是：相当于是令牌的作用。动态token的东西。

优势：

![image-20211224212932634](_assets/AWS%20安全性、身份与合规性入门/image-20211224212932634.png)

![image-20211224212939957](_assets/AWS%20安全性、身份与合规性入门/image-20211224212939957.png)



![image-20211224213450903](_assets/AWS%20安全性、身份与合规性入门/image-20211224213450903.png)

![image-20211224213514908](_assets/AWS%20安全性、身份与合规性入门/image-20211224213514908.png)



![image-20211224213915109](_assets/AWS%20安全性、身份与合规性入门/image-20211224213915109.png)





secret manager 可以动态更换密钥



![image-20211224214005101](_assets/AWS%20安全性、身份与合规性入门/image-20211224214005101.png)



![image-20211224214601447](_assets/AWS%20安全性、身份与合规性入门/image-20211224214601447.png)



## 事件响应

用于事件响应的 Amazon config

相当于提前配置好，触发后，自动响应

![image-20211224214734413](_assets/AWS%20安全性、身份与合规性入门/image-20211224214734413.png)



![image-20211224214746465](_assets/AWS%20安全性、身份与合规性入门/image-20211224214746465.png)



### Amazon config



![image-20211224214903252](_assets/AWS%20安全性、身份与合规性入门/image-20211224214903252.png)

![image-20211224214913398](_assets/AWS%20安全性、身份与合规性入门/image-20211224214913398.png)



工作原理

![image-20211224214930067](_assets/AWS%20安全性、身份与合规性入门/image-20211224214930067.png)

使用应用场景



![image-20211224215016052](_assets/AWS%20安全性、身份与合规性入门/image-20211224215016052.png)



配置触发规则





![image-20211224215154483](_assets/AWS%20安全性、身份与合规性入门/image-20211224215154483.png)





 









