# 第13章 不常见的数据类型

~~## 13.1 结构体~~
~~## 13.2 指针~~

## 13.3 全局数据 (global data)
全局数据可以在程序中的任意一个位置访问。一般来说使用全局数据的风险比局部数据大

与全局数据有关的常见问题
- 无意间修改了全局数据，造成连锁反应
- 与全局数据有关的代码重入（re-entrant）问题。 多线程引起的数据修改
- 全局数据阻碍代码重用。代码片段中使用了全局数据的时候，无法直接使用该代码片段。
- 全局数据会破坏模块化。也就是前面提到的无痛重用

使用全局数据的理由
- 保存全局数值。另一个程序或者多个程序间需要公用
- 模拟具名常量。
- 模拟枚举类型
- 简化常用数据的使用
- 消除流浪数据。当调用链中的子程序不再使用某个对象的时候，该对象就被称为流浪数据 （tramp data）

谨慎使用全局数据
- 先考虑使用局部变量，尽在需要的时候才设置成全局
- 区分全局变量和类变量。

通过访问器子程序（方法）调用获取全局变量。
访问器子程序（方法）是实现抽象数据类型和信息隐藏的一种核心方法。如：有一个全局状态变量g_globalStatus描述程序的整体状态，创建两个访问器子程序（方法）：globalStatus.get()和globalStatus.set()获取状态
![](_assets_/_file_代码大全（第二版）第13章%20不常见的数据类型/img-代码大全（第二版）第13章%20不常见的数据类型-20220718_104939690.png)


降低使用全局数据的风险
- 规范全局变量的命名规则
- 做好全局变量的注释清单
- 全局变量不要存放中间结果


2022年7月18日
Yunxiong
