# 第26章 代码调整技术
提高代码的运行速度和减小代码的资源占用
## 26.1 逻辑
- 在知道答案后停止判断   可以使用“短路判断”
- 按照出现频率来调整判断顺序   让运行最快和判断结果最有可能为真的判断首先被执行；也就是判断先进行常见情况的处理
- 相似逻辑结构的性能比较  if-else 和case语句的比较等
- 用查询表替代复杂逻辑表达式
- 使用惰性求值    用的时候再处理——拖延症

## 26.2 循环
循环是程序热点最常见的藏身之处

将判断外提
把循环放在条件判断语句内，而不是把条件语句放在循环内， 即先if 后 while

循环合并
把连个对相同一组元素进行操作的循环合并在一起，减少多个循环的开销

循环展开 // 个人感觉没什么特别的用处 :>
目的是减少维护循环所需要做的工作；但是展开只适合元素少的情况，元素多的就不建议使用了
```java
i = 0;
while(i<count){
 a[i] = i;
 i = i+1;
}

//展开后，用一个数组处理
i = 0;
while (i < count -1){
a[i] = i;
a[i+1]= i+1;
i = i +2;
}
```

尽可能减少循环内的工作
编写高效循环的关键在于尽可能减少循环内部所作的工作

哨兵值
当循环的判断条件是一个复合判断的时候，可以通过简化判断来节省代码运行时间

把最忙的循环放在最内层

削减运算强度  用多次的轻量级运算（例如 加法）来代替一次代价高昂的运算（例如 乘法）

## 26.3 数据交换

使用整型数而不是浮点数  整型数的加法比浮点数的运算快很多
数组维度尽可能少
减少数组引用
使用辅助索引   访问频率高的数据
使用缓存机制    缓存读取频率高的数据

## 26.4 表达式
削弱运算强度
- 加法替代乘法
- 乘法替代幂乘
- 单精度替代双精度
- ...

编译器初始化  如果在一个子程序调用中使用了一个具名常量或是神秘数值且是唯一参数，提前计算改数值

使用正确的常量类型   所使用的具名常量和应该同被赋值的相应变量应具有相同的类型

删除公共子表达式
如果某个表达式经常被用到，付给一个变量，在需要的时候引用即可。

## 26.5 子程序
子程序说白了和方法函数一个意思，就是代码组成的一个块

## 26.7 变得越多，事情反而越没变
代码调整无可避免地为性能改善的良好愿望而付出复杂性、可读性、简单性、可维护性方面的代价。每一次调整后需要针对性能进行重新评估，引入巨额的管理维护和开销
恪守“对每一次的改进进行量化”的准则，是低于思考成熟前匆忙优化的法宝

2022年7月25日
Yunxiong
