第2部分  创建高质量的代码
第5章~第9章

# 第05章 软件构建中的设计

## 5.1 设计中的挑战
设计：把需求分析和编码调试连在一起
- 设计是一个险恶的问题  解决了眼前的问题，提交的方案也会因为后续不可控的变量而导致需要修改项目。
- 设计就是确定取舍和调整顺序的过程
- 设计受到诸多限制
- 设计是不确定的
- 设计是一个启发式过程
- 设计是自然而然形成的

## 5.2 关键的设计概念
管理好复杂度：既能让自己容易理解，也能让别人容易看懂

理想得设计特征：
- 最小复杂度
- 易于维护
- 松散耦合
- 可扩展性
- 可重用性
- 高扇入？ 让大量的类使用某个给定的类
- 低扇入？一个类里少量或适中地使用其他的类
- 可移植性
- 精简性
- 层次性

设计的层次
![](_assets/_file_代码大全（第二版）第05章%20软件构建中的设计/img-代码大全（第二版）第05章%20软件构建中的设计-20220729_104224893.png)


系统层设计图应该是无环图；不能出现A调用B ，B调用C，C调用A的情况

分解为子系统或包
	常用的子系统
	业务规则
	用户界面
	数据库访问
	对系统的依赖性

分解为类  即接口类一定要设计好，确保分解的细节恰到好处

## 5.3 设计构造块

软件设计是非确定性的
找出现实世界中的对象
形成一致的抽象
封装实现细节
隐藏秘密 
- 信息隐藏：开发者把一个地方的设计和实现决策隐藏起来，使其他的部分看不到他们
- 隐藏复杂度，隐藏变化源

找出容易改变的区域
- 找出易变的部分
- 分离易变的部分
- 易变化的区域
	业务规则，业务需求
	对硬件的依赖
	输入输出
	非标准的语言特性
	状态变量
	数据量的限制

保持松散耦合 Keep Coupling loose
	深入理解松散耦合的定义是什么？例子？
	耦合度表示类与类之间或者子程序与子程序之间关系的紧密程度
	耦合度设计的目标是创建出小的，直接的，清晰的类或子程序；使它们与其他类之间关系尽可能地灵活，这就被称作“松散耦合”
		火车车厢的连接就显得很简单
	耦合的标准
		规模
			模块之间的连接数
			小就是美，关联模块越少越好
			参数越少越好，类方法越少越好
			减少关联性
		可见性
			模块之间的连接的显著程度
			通过参数表传递数据便是一种明显的连接
		灵活性
			模块之间的连接是否容易改动
		一个模块越容易被其他模块所调用，那么它们之间的耦合关系就越松散
	耦合的种类
		简单数据参数耦合
			两个模块之间通过参数来传递数据，并且参数类型都是简单数据类型
			可接受
		简单对象耦合
			一个模块实例化一个对象： 
例子：Customer类里面持有Order订单对象
			可接受
		对象参数耦合
			Object1要求Object2给它一个Object3
			这种关系更加紧密
		语义上的耦合
			最难缠的情况
			非常危险的耦合，导致代码崩溃找错会很难
	类和子程序是用于降低复杂度的首选，如果没有简化工作，那么就是失职

常用的设计模式 哦吼~ 看了忘，忘了看！理解思想内核更加重要
	提供现成的抽象减少复杂度
	能解决常见的问题，给予制度化减少出错

设计的其他启发式方法
	高内聚性
		类内部的子程序的所有代码在支持一个中心目标上紧密程度；劲往一处使！
	构造分层结构
		信息结构
		抽象通用的在高层次
		详细具体的在底层次
	严格描述类契约
	分配职责  问每个对象该对什么负责
	为测试而设计
	避免失误
	画一个图 通过画图能更加清晰表达出自己的想法
	保持设计的模块化

## 5.4 设计实践
迭代：每次的尝试修改都会有所收获，这有助于改善整体设计
分而治之
自上而下：抽象层开始，自下而上：从细节向一般性延伸
建立实验性原型：prototype，判断解决方案是否能满足需求，可以设计出原型进行试验
设计文档的细化程度：设计得太细，编码就变成了纯粹得翻译；设计得太笼统，编码又难以下手

2022年7月29日（整理xmind）
Yunxiong
